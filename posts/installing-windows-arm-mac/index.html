<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />

  
  
  
  
  

  

  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css" integrity="sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link href="https://imflog.github.io/deep-thought.css" rel="stylesheet" />
  
  

  <title>
    
My personal blog | Using a Windows ARM VM on a ARM MAC

  </title>

  
  
  

  
</head>

<body class="has-background-white">
  <nav aria-label="section navigation" class="navbar is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="https:&#x2F;&#x2F;imflog.github.io">My personal blog</a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          
          
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;imflog.github.io&#x2F;">
            Home
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;imflog.github.io&#x2F;posts">
            Posts
          </a>
          
          
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  
  

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title">
            Using a Windows ARM VM on a ARM MAC
          </h1>
          <p class="subtitle"></p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="fas fa-user"></i>
  </span>
  <span>Florian Garcia published on</span>
  <span class="icon">
    <i class="far fa-calendar-alt"></i>
  </span>
  <span><time datetime="2023-04-28">April 28, 2023</time></span>
</span>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-clock"></i>
  </span>
  <span>4 min,</span>
  <span class="icon">
    <i class="fas fa-pencil-alt"></i>
  </span>
  <span>628 words</span>
</span>

            </div>
            <div class="column">
              
              
<p>
  Categories:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://imflog.github.io/categories/tips/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-cube"></i>
      </span>
      <span>Tips</span>
    </span>
  </a>
  
</p>

              
            </div>
            <div class="column has-text-right-desktop">
              
              
<p>
  Tags:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://imflog.github.io/tags/arm/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>ARM</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://imflog.github.io/tags/mac/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>MAC</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://imflog.github.io/tags/windows/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>Windows</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://imflog.github.io/tags/utm/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>UTM</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://imflog.github.io/tags/vm/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>VM</span>
    </span>
  </a>
  
</p>

              
            </div>
          </div>
          <div class="content mt-2">
            <p>While working on some obscure Windows and .NET things involving the requirement to run on Windows,
I had to install a Windows VM.</p>
<p>So I started looking around what can be done nowadays to use a VM in macOS.
My first thought was to use Virtualbox and I rejoice when I found a <a href="https://www.virtualbox.org/wiki/Downloads">developer preview</a> 
of it was available. After some poking around, I found out that even if it's working on ARM, it is not capable of running ARM VMs.</p>
<p>So I started looking elsewhere and I found <a href="https://mac.getutm.app/">UTM</a>, a free and open source VM manager for macOS.</p>
<p>In this article, I will explain how you can install Windows ARM on an ARM Mac using UTM.</p>
<h1 id="prerequisites">Prerequisites</h1>
<p>First of all, you will need to retrieve the Windows ARM image.
Fortunately, Microsoft provides a <a href="https://www.microsoft.com/en-us/software-download/windowsinsiderpreviewARM64">free evaluation version</a>.
To be able to download it, you can simply register to the Windows Insider program (a Microsoft account is required).</p>
<p>Then you need to install UTM, just follow the instructions on their <a href="https://mac.getutm.app/">website</a>.</p>
<h1 id="configuring-the-vm">Configuring the VM</h1>
<p>Unfortunately, just booting the VM on the provided HDVX file in UTM is not enough with Windows 11 (hence this blog).
So here are the steps to install the VM correctly:</p>
<ol>
<li>
<p>Create a new VM in UTM, you can select virtualization as we are using the same CPU architecture. Then you can use the HDVX file you downloaded from Microsoft: </p>
<p style="text-align:center;"><img src="/posts/windows_arm/vm_configuration_utm.png" alt="VM configuration in UTM" width="400"/></p>
</li>
<li>
<p>After the boot, you will be prompted to select a network to finish the installation. But, the network will not be detected. 
So you need to press MAJ + F10 to open a command prompt and run the following command <code>OOBE\BYPASSNRO</code>.</p>
<p style="text-align:center;"><img src="/posts/windows_arm/bypass_network.png" alt="Terminal command to bypass network connection at login" width="400"/></p>
</li>
<li>
<p>This will reboot the VM, and when you get back to the network page, you will now have a ‚ÄúI don‚Äôt have internet‚Äù button üòé</p>
<p style="text-align:center;"><img src="/posts/windows_arm/connection_skip.png" alt="Skip connection screen on Windows installer" width="400"/></p>
</li>
<li>
<p>Then you can finish the installation normally, and you will be greeted by the Windows 11 desktop. Where you won't have internet and an horrible resolution üò≠</p>
</li>
<li>
<p>But don't worry, UTM got you covered, as you checked the &quot;Install drivers and SPICE tools&quot; box on the VM configuration,
A Disk is mounted on the VM, you can run the &quot;SPICE guest tools&quot; installer that will reboot the VM.</p>
</li>
<li>
<p>The final step will be to modify the network configuration in UTM. You need to go to the VM configuration, then to the network tab.
There you will need to change the network adapter type to &quot;virtio-net-pci&quot; and the network mode to &quot;Bridged&quot;.
The interface that you need to use can probably stay the default value, but in doubt you can run <code>route get 10.10.10.10</code> and check what's the used interface.</p>
<p style="text-align:center;"><img src="/posts/windows_arm/network_configuration.png" alt="Network configuration in UTM" width="400"/></p>
</li>
</ol>
<h1 id="final-words">Final words</h1>
<p>And that's it, you now have a working Windows ARM VM on your Mac ARM üéâ
You can tweak a bit the resources you want to allocate to the VM to ensure correct performances, 
but it's working pretty well for me at the time of this writing.</p>
<p>What's cool also is that UTM is not limited to Windows ARM, you can use it to run any VMs, and also it's free and open source.
You can find the code and issue tracker on <a href="https://github.com/utmapp/UTM">GitHub</a>.</p>
<p>Hope It can help someone.</p>
<p>Flo.</p>

          </div>
        </article>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Search</p>
      </header>
      <section class="modal-card-body">
        <div class="field mb-2">
          <div class="control">
            <input class="input" id="search" placeholder="Search this website." type="search" />
          </div>
        </div>
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </section>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
               
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;imflog.github.io&#x2F;posts&#x2F;nx-tips&#x2F;">
              NX tips<span class="icon ml-2">
                <i class="fas fa-arrow-circle-right"></i>
              </span>
            </a>
          </div>
          
        </nav>
      </div>
    </div>
  </div>
</section>



  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-6">
        <div id="disqus_thread"></div>
      </div>
    </div>
  </div>
</section>



  
  <footer class="footer py-4">
    <div class="content has-text-centered">
      <p>
        Built with
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-code"></i>
          </span>
          <span>code</span>
        </span>
        and
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-heart"></i>
          </span>
          <span>love</span>
        </span>
      </p>
      <p>
        Powered by
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-power-off"></i>
          </span>
          <span>zola</span>
        </span>
      </p>
    </div>
  </footer>
  

  
  
  <script src="https://cdn.jsdelivr.net/npm/mermaid@8.13.5/dist/mermaid.min.js" integrity="sha384-0yWn54pSGtfKCU+skfA69l25VsCw+MZt4LQov3xNRoS7YkAMrFokGgSBnAWSK4pv" crossorigin="anonymous"></script>
  
  
  
  <script src="https://imflog.github.io/elasticlunr.min.js"></script>
  <script src="https://imflog.github.io/search_index.en.js"></script><script src="https://imflog.github.io/js/site.js"></script>

  



<script>
  var disqus_config = function () {
    this.page.url = "https://imflog.github.io";
    this.page.identifier = "/posts/installing-windows-arm-mac/";
  };

  (function () {
    var d = document, s = d.createElement('script');
    s.src = 'https://https-imflog-github-io.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>



  
  
</body>

</html>
